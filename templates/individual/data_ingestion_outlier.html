{% extends '/individual/layout.html' %} {% block content %}
<div class="container-fluid">
    <!-- Page Heading -->
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
      <h1 class="h3 mb-0 text-gray-800">Outlier Detection</h1>
    </div>

    <!-- Content Row -->
	<div class='row'>
		<div class="col-xl-12 col-lg-12">
			<div class="btn btn-primary btn-icon-split original_button">
	          <span class="icon text-white-50">
	            <i class="fas fa-flag"></i>
	          </span>
	          <span class="text">Original Data</span>
	        </div>
	        <div class="btn btn-danger btn-icon-split outlier_button">
	          <span class="icon text-white-50">
	            <i class="fas fa-flag"></i>
	          </span>
	          <span class="text">Data with outlier-detection</span>
	        </div>
	        <div class="btn btn-danger btn-icon-split all_button">
	          <span class="icon text-white-50">
	            <i class="fas fa-flag"></i>
	          </span>
	          <span class="text">All Data</span>
	        </div>
		</div>
	</div>

    <!-- Content Row -->

    <div class="row">

      <!-- Area Chart -->
      <div class="col-xl-8 col-lg-8">
        <div class="card shadow mb-8 original">
          <!-- Card Header - Dropdown -->
          <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
            <h6 class="m-0 font-weight-bold text-primary">Original {{feature}} Data value</h6>
          </div>
          <!-- Card Body -->
          <div class="card-body">
           	<canvas id="original" width="100%" height="30"></canvas>
          </div>
        </div>
        <div class="card shadow mb-8 outlier">
          <!-- Card Header - Dropdown -->
          <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
            <h6 class="m-0 font-weight-bold text-primary">Modified {{feature}} Data value after outlier detection</h6>
          </div>
          <!-- Card Body -->
          <div class="card-body">
           	<canvas id="outlier" width="100%" height="30"></canvas>
          </div>
        </div>
      </div>
      <div class="col-xl-4 col-lg-4">
        <div class="card shadow mb-8">
          <!-- Card Header - Dropdown -->
          <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
            <h6 class="m-0 font-weight-bold text-primary">{{feature}} Data Distribution</h6>
          </div>
          <!-- Card Body -->
          <div class="card-body">
           	<div id="original_box" width="100%" height='30'></div>
          </div>
        </div>
      </div>
   </div>
{% endblock %}
{% block script %} 
<script src={{url_for('static', filename="js/Chart.js")}}></script>
<script>
var backgroundColor1 =  [
    'rgba(255, 99, 132, 0.2)',
    'rgba(54, 162, 235, 0.2)',
    'rgba(255, 206, 86, 0.2)',
    'rgba(75, 192, 192, 0.2)',
    'rgba(153, 102, 255, 0.2)',
    'rgba(255, 159, 64, 0.2)'
]
var borderColor1 = [
    'rgba(255, 99, 132, 1)',
    'rgba(54, 162, 235, 1)',
    'rgba(255, 206, 86, 1)',
    'rgba(75, 192, 192, 1)',
    'rgba(153, 102, 255, 1)',
    'rgba(255, 159, 64, 1)'
]
var original_data = {{data1|tojson}}
var outlier_data = {{data2|tojson}}
var data1_index ={{data1_index|tojson}}
var data2_index ={{data2_index|tojson}}
var feature ={{feature|tojson}}


var data1 = {
        labels: data1_index,
        datasets: [{
            label: feature,
            data: original_data,
            backgroundColor:backgroundColor1[1],
            borderColor:borderColor1[1] ,
            borderWidth: 1
        }]
    }
var data2 = {
        labels: data2_index,
        datasets: [{
            label: feature,
            data: outlier_data,
            backgroundColor:backgroundColor1[2],
            borderColor:borderColor1[2] ,
            borderWidth: 1
        }]
    }
var option1 = {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
   
$(document).ready(function(){
	var original = document.getElementById('original').getContext('2d');
	var outlier = document.getElementById('outlier').getContext('2d');
	
	var myChart = new Chart(original, {
	    type: 'line',
	    data: data1,
	    options: option1,
	    title:'before'
	});
	var myChart2 = new Chart(outlier, {
	    type: 'line',
	    data: data2,
	    options: option1,
	    title:'after'
	});
	$('.outlier').hide()
	$('.original').show()
	console.log(original_data)
	console.log(outlier_data)
	console.log(category)
	console.log(feature)

	
});

$('.outlier_button').click(function(){
	$('.outlier').show()
	$('.original').hide()
});
$('.original_button').click(function(){
	$('.original').show()
	$('.outlier').hide()
});
$('.all_button').click(function(){
	$('.original').show()
	$('.outlier').show()
});

</script>

<script src={{url_for('static', filename="js/plotly.js")}}></script>


<script>
$(document).ready(function(){
	
	var y0 = original_data;
	var y1 = outlier_data;

	var original = {
	  y: y0,
	  type: 'box'
	};

	var outlier_detection = {
	  y: y1,
	  type: 'box'
	};

	var data = [original, outlier_detection];

	Plotly.newPlot('original_box', data);
});
</script>
{% endblock %}
